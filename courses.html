<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Courses - Crown Institute</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg">
        <div class="max-w-6xl mx-auto px-4">
            <div class="flex justify-between">
                <div class="flex space-x-7">
                    <a href="index.html" class="flex items-center py-4 px-2">
                        <div class="ml-2">
                            <span class="font-bold text-xl text-white block">Crown Institute</span>
                            <span class="text-sm text-[#FFB800] italic">From Possibility to Actuality</span>
                        </div>
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-1">
                    <a href="index.html" class="py-4 px-2 text-gray-500 font-semibold hover:text-blue-500 transition duration-300">Home</a>
                    <a href="courses.html" class="py-4 px-2 text-blue-500 border-b-4 border-blue-500 font-semibold">Courses</a>
                    <div class="relative group">
                        <button class="py-4 px-2 text-gray-500 font-semibold hover:text-blue-500 transition duration-300 flex items-center">
                            <span>Account</span>
                            <i class="fas fa-chevron-down ml-1 text-xs"></i>
                        </button>
                        <div class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 hidden group-hover:block">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Profile</a>
                            <a href="index.html" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100" onclick="logout()">Logout</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- Courses Content -->
    <div class="container mx-auto px-4 py-8">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-8">
            <h1 class="text-3xl font-bold text-gray-800 mb-4 md:mb-0">Available Courses</h1>
            
            <!-- Filters -->
            <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 w-full md:w-auto">
                <div class="relative">
                    <select id="categoryFilter" class="appearance-none bg-white border border-gray-300 rounded-md py-2 pl-3 pr-8 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="all">All Categories</option>
                        <option value="programming">Programming</option>
                        <option value="design">Design</option>
                        <option value="business">Business</option>
                    </select>
                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                        <i class="fas fa-chevron-down text-xs"></i>
                    </div>
                </div>
                <button onclick="applyFilters()" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md text-sm">
                    Apply Filters
                </button>
            </div>
        </div>

        <!-- Course Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6" id="courseGrid">
            <!-- Courses will be dynamically inserted here -->
        </div>
    </div>

    <!-- Enrollment Modal -->
    <div id="enrollmentModal" class="fixed z-10 inset-0 overflow-y-auto hidden">
        <div class="flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
            <div class="fixed inset-0 transition-opacity" aria-hidden="true">
                <div class="absolute inset-0 bg-gray-500 opacity-75"></div>
            </div>
            <span class="hidden sm:inline-block sm:align-middle sm:h-screen" aria-hidden="true">&#8203;</span>
            <div class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <h3 class="text-lg leading-6 font-medium text-gray-900 mb-4" id="modalTitle">Enroll in Course</h3>
                    <p class="text-sm text-gray-500 mb-4" id="modalDescription">You are about to enroll in this course. Confirm to proceed.</p>
                </div>
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="button" onclick="confirmEnrollment()" class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm">
                        Confirm Enrollment
                    </button>
                    <button type="button" onclick="closeEnrollmentModal()" class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-12">
        <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Crown Institute</h3>
                    <p class="mt-4 text-base text-gray-300">
                        Empowering learners through quality education since 2025.
                    </p>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Navigation</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="index.html" class="text-base text-gray-300 hover:text-white">Home</a></li>
                        <li><a href="courses.html" class="text-base text-gray-300 hover:text-white">Courses</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Legal</h3>
                    <ul class="mt-4 space-y-4">
                        <li><a href="#" class="text-base text-gray-300 hover:text-white">Privacy Policy</a></li>
                        <li><a href="#" class="text-base text-gray-300 hover:text-white">Terms of Service</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-sm font-semibold text-gray-400 tracking-wider uppercase">Connect</h3>
                    <div class="mt-4 flex space-x-6">
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-facebook-f"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white">
                            <i class="fab fa-linkedin-in"></i>
                        </a>
                    </div>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-700 pt-8">
                <p class="text-base text-gray-400 text-center">
                    &copy; 2025 Crown Institute . All rights reserved.
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Get courses from localStorage or use sample data
        let courses = JSON.parse(localStorage.getItem('courses')) || [
            {
                id: '1',
                title: 'Introduction to Programming',
                category: 'programming',
                students: 120,
                description: 'Learn the fundamentals of programming with Python.',
                image: 'https://images.pexels.com/photos/546819/pexels-photo-546819.jpeg',
                rating: 4.5
            },
            {
                id: '2',
                title: 'UI/UX Design Fundamentals',
                category: 'design',
                students: 85,
                description: 'Master the principles of user interface and experience design.',
                image: 'https://images.pexels.com/photos/1109543/pexels-photo-1109543.jpeg',
                rating: 4.0
            },
            {
                id: '3',
                title: 'Business Management',
                category: 'business',
                students: 210,
                description: 'Essential skills for modern business leaders and entrepreneurs.',
                image: 'https://images.pexels.com/photos/3184465/pexels-photo-3184465.jpeg',
                rating: 5.0
            },
            {
                id: '4',
                title: 'Web Development Bootcamp',
                category: 'programming',
                students: 156,
                description: 'Complete guide to becoming a full-stack web developer.',
                image: 'https://images.pexels.com/photos/1779487/pexels-photo-1779487.jpeg',
                rating: 4.7
            },
            {
                id: '5',
                title: 'Graphic Design Masterclass',
                category: 'design',
                students: 92,
                description: 'Learn professional graphic design techniques and tools.',
                image: 'https://images.pexels.com/photos/11035371/pexels-photo-11035371.jpeg',
                rating: 4.2
            },
            {
                id: '6',
                title: 'Digital Marketing Fundamentals',
                category: 'business',
                students: 178,
                description: 'Introduction to digital marketing strategies and tools.',
                image: 'https://images.pexels.com/photos/669615/pexels-photo-669615.jpeg',
                rating: 4.3
            }
        ];

        // Current selected course for enrollment
        let selectedCourseId = null;

        // Initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            renderCourses();
            
            // Check if user is logged in
            if (!localStorage.getItem('isLoggedIn')) {
                window.location.href = 'login.html';
            }
        });

        // Render courses in the grid
        function renderCourses(filteredCourses = null) {
            const courseGrid = document.getElementById('courseGrid');
            courseGrid.innerHTML = '';
            
            const coursesToRender = filteredCourses || courses;
            
            coursesToRender.forEach(course => {
                const courseCard = document.createElement('div');
                courseCard.className = 'bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-300';
                courseCard.innerHTML = `
                    <div class="h-48 overflow-hidden">
                        <img class="w-full h-full object-cover" src="${course.image}" alt="${course.title}">
                    </div>
                    <div class="p-6">
                        <div>
                            <span class="inline-block px-2 py-1 text-xs font-semibold rounded-full ${getCategoryColor(course.category)}">
                                ${course.category.charAt(0).toUpperCase() + course.category.slice(1)}
                            </span>
                            <h3 class="mt-2 text-lg font-semibold text-gray-900">${course.title}</h3>
                        </div>
                        <p class="mt-2 text-sm text-gray-600">${course.description}</p>
                        <div class="mt-4 flex items-center justify-between">
                            <div class="flex items-center">
                                <div class="flex items-center">
                                    ${renderRatingStars(course.rating)}
                                </div>
                                <span class="ml-2 text-sm text-gray-600">${course.rating.toFixed(1)} (${course.students})</span>
                            </div>
                            <button onclick="openEnrollmentModal('${course.id}')" class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500">
                                Enroll Now
                            </button>
                        </div>
                    </div>
                `;
                courseGrid.appendChild(courseCard);
            });
        }

        // Apply filters
        function applyFilters() {
            const categoryFilter = document.getElementById('categoryFilter').value;
            
            let filteredCourses = [...courses];
            
            // Apply category filter
            if (categoryFilter !== 'all') {
                filteredCourses = filteredCourses.filter(course => course.category === categoryFilter);
            }
            
            renderCourses(filteredCourses);
        }

        // Open enrollment modal
        function openEnrollmentModal(courseId) {
            selectedCourseId = courseId;
            const course = courses.find(c => c.id === courseId);
            
            if (course) {
                document.getElementById('modalTitle').textContent = `Enroll in ${course.title}`;
                document.getElementById('modalDescription').textContent = `You are about to enroll in "${course.title}". Confirm to proceed.`;
                document.getElementById('enrollmentModal').classList.remove('hidden');
            }
        }

        // Close enrollment modal
        function closeEnrollmentModal() {
            document.getElementById('enrollmentModal').classList.add('hidden');
            document.getElementById('couponCode').value = '';
        }

        // Confirm enrollment
        function confirmEnrollment() {
            const couponCode = document.getElementById('couponCode').value;
            const courseIndex = courses.findIndex(c => c.id === selectedCourseId);
            
            if (courseIndex !== -1) {
                // In a real app, this would be an API call
                courses[courseIndex].students += 1;
                localStorage.setItem('courses', JSON.stringify(courses));
                
                alert(`Successfully enrolled in "${courses[courseIndex].title}"!`);
                closeEnrollmentModal();
                renderCourses();
            }
        }

        // Helper function to get category color
        function getCategoryColor(category) {
            switch (category) {
                case 'programming': return 'bg-blue-100 text-blue-800';
                case 'design': return 'bg-purple-100 text-purple-800';
                case 'business': return 'bg-green-100 text-green-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        // Helper function to render rating stars
        function renderRatingStars(rating) {
            let stars = '';
            const fullStars = Math.floor(rating);
            const hasHalfStar = rating % 1 >= 0.5;
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star text-yellow-400"></i>';
            }
            
            if (hasHalfStar) {
                stars += '<i class="fas fa-star-half-alt text-yellow-400"></i>';
            }
            
            const emptyStars = 5 - fullStars - (hasHalfStar ? 1 : 0);
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star text-yellow-400"></i>';
            }
            
            return stars;
        }

        // Logout function
        function logout() {
            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('userEmail');
            localStorage.removeItem('userRole');
        }
    </script>
</body>
</html>
